{"ast":null,"code":"var _jsxFileName = \"/Users/longvd/Documents/DoAn/Vehicle-management/frontend/license-plate-camera/src/views/setting.view.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { FetchRegion } from \"../services/license-plate-app/region.service\";\nimport { Button, FormControl, InputLabel, MenuItem, Select, TextField } from \"@mui/material\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Setting() {\n  _s();\n  const fetchRegion = new FetchRegion();\n  var [regions, setRegions] = useState([]);\n  var [cameras, setCameras] = useState([]);\n  var [region, setRegion] = useState();\n  var [value, setValue] = useState('');\n  var [info, setInfo] = useState('');\n  useEffect(() => {\n    fetchRegion.get_all().then(res => {\n      setRegions(res);\n    });\n  }, [info]);\n  const handleChange = event => {\n    setValue(event.target.value);\n    var object = JSON.parse(event.target.value);\n    setRegion(object);\n    if (object) {\n      setCameras(object.cameras);\n    }\n  };\n  const handleSubmit = async event => {\n    // console.log(event);\n    const names = Array.from(document.getElementsByName('name'));\n    const rtsp_links = Array.from(document.getElementsByName('rtsp_link'));\n    const types = Array.from(document.getElementsByName('type'));\n    var camera_list = [];\n    for (var i = 0; i < names.length; i++) {\n      var object = {\n        name: names[i].value,\n        rtsp_url: rtsp_links[i].value,\n        type: types[i].value\n      };\n      camera_list.push(object);\n    }\n    if (region) {\n      let announce = await fetchRegion.update(region._id, {\n        cameras: camera_list\n      });\n      // console.log(info)\n      setInfo(announce);\n      if (announce) {\n        alert(announce.detail);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Setting\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(InputLabel, {\n        id: \"demo-simple-select-label\",\n        children: \"Region\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Select, {\n        labelId: \"demo-simple-select-label\",\n        id: \"demo-simple-select\",\n        value: value,\n        label: \"Region\",\n        onChange: handleChange,\n        children: regions.map((value, i) => /*#__PURE__*/_jsxDEV(MenuItem, {\n          value: JSON.stringify(value),\n          children: value['region']\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n      className: \"section\",\n      children: JSON.stringify(region, null, ' ')\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), cameras.map((value, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"list_div\",\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        name: \"name\",\n        disabled: true,\n        label: \"Name\",\n        defaultValue: value.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        name: \"rtsp_link\",\n        label: \"RTSP\",\n        defaultValue: value.rtsp_url,\n        variant: \"filled\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        name: \"type\",\n        disabled: true,\n        label: \"type\",\n        defaultValue: value.type\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this)]\n    }, i, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }, this)), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      onClick: handleSubmit,\n      children: \"Update\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n_s(Setting, \"6CsDEun2uz4eU3fBZNELGXMtY6Q=\");\n_c = Setting;\nvar _c;\n$RefreshReg$(_c, \"Setting\");","map":{"version":3,"names":["useEffect","useState","FetchRegion","Button","FormControl","InputLabel","MenuItem","Select","TextField","Setting","fetchRegion","regions","setRegions","cameras","setCameras","region","setRegion","value","setValue","info","setInfo","get_all","then","res","handleChange","event","target","object","JSON","parse","handleSubmit","names","Array","from","document","getElementsByName","rtsp_links","types","camera_list","i","length","name","rtsp_url","type","push","announce","update","_id","alert","detail","map","stringify"],"sources":["/Users/longvd/Documents/DoAn/Vehicle-management/frontend/license-plate-camera/src/views/setting.view.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { FetchRegion } from \"../services/license-plate-app/region.service\";\nimport { Region, Camera } from \"../interfaces/region.interface\";\nimport { Button, FormControl, InputLabel, MenuItem, Select, TextField } from \"@mui/material\";\n\n\nexport default function Setting() {\n    const fetchRegion = new FetchRegion();\n\n    var [regions, setRegions] = useState<Region[]>([]);\n    var [cameras, setCameras] = useState<Camera[]>([]);\n    var [region, setRegion] = useState<Region>();\n    var [value, setValue] = useState<string>('');\n    var [info, setInfo] = useState<string>('');\n\n    useEffect(() => {\n        fetchRegion.get_all().then((res) => {\n            setRegions(res);\n        })\n    }, [info])\n\n    const handleChange = (event: any) => {\n        setValue(event.target.value)\n        var object = JSON.parse(event.target.value);\n        setRegion(object)\n\n        if(object){\n            setCameras(object.cameras)\n        }\n    }\n\n    const handleSubmit = async(event: any) => {\n        // console.log(event);\n        const names = Array.from(document.getElementsByName('name'))\n        const rtsp_links = Array.from(document.getElementsByName('rtsp_link'))\n        const types = Array.from(document.getElementsByName('type'))\n        var camera_list = []\n\n        for(var i=0;i<names.length;i++){\n            var object = {\n                name: (names[i] as HTMLInputElement).value,\n                rtsp_url: (rtsp_links[i] as HTMLInputElement).value,\n                type: (types[i] as HTMLInputElement).value\n            }\n            camera_list.push(object)\n        }\n\n        if(region){\n            let announce = await fetchRegion.update(region._id,{cameras:camera_list})\n            // console.log(info)\n            setInfo(announce)\n            if(announce){\n                alert((announce as any).detail)\n            }\n        }\n    } \n\n    return (\n        <>\n            <h3>Setting</h3>\n            <FormControl fullWidth>\n                <InputLabel id=\"demo-simple-select-label\">Region</InputLabel>\n                <Select\n                    labelId=\"demo-simple-select-label\"\n                    id=\"demo-simple-select\"\n                    value={value}\n                    label=\"Region\"\n                    onChange={handleChange}\n                >\n                    {regions.map((value, i) => (\n                        <MenuItem key={i} value={JSON.stringify(value)}>\n                            {value['region']}\n                        </MenuItem>\n                    ))}\n                </Select>\n            </FormControl>\n\n            <pre className=\"section\">{JSON.stringify(region, null, ' ')}</pre>\n            {/* <pre className=\"section\">{JSON.stringify(cameras, null, ' ')}</pre> */}\n            \n            {cameras.map((value,i)=>(\n                <div className='list_div' key={i}>\n                    <br/>\n                    <TextField name=\"name\" disabled label=\"Name\" defaultValue={value.name}/>\n                    <TextField name=\"rtsp_link\" label=\"RTSP\" defaultValue={value.rtsp_url} variant=\"filled\"/>\n                    <TextField name=\"type\" disabled label=\"type\" defaultValue={value.type}/>\n                    <br/>\n                </div>\n            ))}\n            {/* <br/> \n            <Button variant=\"outlined\" color=\"success\">Add</Button> */}\n            <br/>\n            <Button variant=\"contained\" onClick={handleSubmit}>Update</Button>\n        </>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}